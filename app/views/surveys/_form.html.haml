- if @survey.responses.any?
  .alert-message.block-message.error
    %strong Warning!
    There are existing responses to this survey. Making changes may invalidate the existing
    data and cause problems on export. You can
    = link_to 'click here', clear_survey_path(@survey), method: :delete, confirm: "This will permenantly delete all responses to this survey! Are you sure you wish to proceed?"
    to clear existing responses.

- if @survey.errors.any?
  .alert-message.block-message.error
    %strong There were some errors with the survey preventing it from being saved:
    %ul
      - @survey.errors.full_messages.each do |message|
        %li= message

= form_for @survey, html: {class: 'form-stacked'} do |f|
  %fieldset
    %legend
      == #{@survey.persisted? ? 'Edit' : 'New'} survey

    .clearfix
      = f.label :name
      .input
        = f.text_field :name, class: 'span6'

    .clearfix

    .clearfix
      = f.label :xml, 'Survey XML'
      .input
        = f.text_area :xml, rows: 20, class: 'span12'
        %span.help-block= link_to 'Markdown reference', '/markdown-reference/index.html', class: 'fancybox fancybox.iframe'

    .actions
      = f.submit class: 'btn primary', value: 'Save'
      = f.submit class: 'btn info', value: 'Save and continue editing'
      = f.submit class: 'btn info', value: 'Save and preview'
      = link_to 'Cancel', surveys_path, class: 'btn'
